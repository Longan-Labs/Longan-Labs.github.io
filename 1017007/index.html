



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Docs of Longan Labs">
      
      
        <link rel="canonical" href="https://longan-labs.cc/1017007/">
      
      
        <meta name="author" content="Loovee">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Sensor Display Board - Longan Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#ffa000">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "None", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="amber" data-md-color-accent="amber">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#introduction" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://longan-labs.cc" title="Longan Docs" aria-label="Longan Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Longan Docs
            </span>
            <span class="md-header-nav__topic">
              
                Sensor Display Board
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/Longan-Labs/docs_mkdocs" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Longan-Labs/docs_mkdocs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link">
        About
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../1040001/" class="md-tabs__link">
          Electronic
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../cards-system-summary/" class="md-tabs__link md-tabs__link--active">
          Cards
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../1030003/" class="md-tabs__link">
          CAN Bus
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://longan-labs.cc" title="Longan Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Longan Docs
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/Longan-Labs/docs_mkdocs" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Longan-Labs/docs_mkdocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Electronic
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Electronic
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../1040001/" title="IRduino" class="md-nav__link">
      IRduino
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1040002/" title="Heelight Core" class="md-nav__link">
      Heelight Core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1040003/" title="Heelight Relay" class="md-nav__link">
      Heelight Relay
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1040004/" title="Keyboard" class="md-nav__link">
      Keyboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1040006/" title="AHT20 Temp&Humi Sensor" class="md-nav__link">
      AHT20 Temp&Humi Sensor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1040005/" title="GPS/BDS Module" class="md-nav__link">
      GPS/BDS Module
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Cards
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Cards
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cards-system-summary/" title="Cards System Summary" class="md-nav__link">
      Cards System Summary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1016007/" title="AAA Battery Card" class="md-nav__link">
      AAA Battery Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1013007/" title="Carduino 32U4" class="md-nav__link">
      Carduino 32U4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1017008/" title="Game Board" class="md-nav__link">
      Game Board
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011001/" title="Temperature Card" class="md-nav__link">
      Temperature Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1012002/" title="Buzzer Card" class="md-nav__link">
      Buzzer Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011010/" title="Light Sensor Card" class="md-nav__link">
      Light Sensor Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1017002/" title="Extension Board" class="md-nav__link">
      Extension Board
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Sensor Display Board
      </label>
    
    <a href="./" title="Sensor Display Board" class="md-nav__link md-nav__link--active">
      Sensor Display Board
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-on" class="md-nav__link">
    What's on
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buses" class="md-nav__link">
    Buses
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use" class="md-nav__link">
    How to Use
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#displaying-sensor-data" class="md-nav__link">
    Displaying Sensor Data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    Resources
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011008/" title="BME280 Card" class="md-nav__link">
      BME280 Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1014001/" title="OLED Display Card" class="md-nav__link">
      OLED Display Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011007/" title="Rotary Angle Card" class="md-nav__link">
      Rotary Angle Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1016006/" title="Programmer Card" class="md-nav__link">
      Programmer Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1013001/" title="Carduino 328" class="md-nav__link">
      Carduino 328
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011027/" title="Button Input Card" class="md-nav__link">
      Button Input Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011029/" title="IR Receiver Card" class="md-nav__link">
      IR Receiver Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011002/" title="Sound Sensor Card" class="md-nav__link">
      Sound Sensor Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011003/" title="PIR Sensor Card" class="md-nav__link">
      PIR Sensor Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011012/" title="RTC Card" class="md-nav__link">
      RTC Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011021/" title="9-Dof Sensor Card" class="md-nav__link">
      9-Dof Sensor Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1012003/" title="Motor Driver Card" class="md-nav__link">
      Motor Driver Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1012001/" title="Relay Card" class="md-nav__link">
      Relay Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1011032/" title="Line Finder Card" class="md-nav__link">
      Line Finder Card
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      CAN Bus
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        CAN Bus
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../1030003/" title="OBD-II CAN Bus GPS Development Kit" class="md-nav__link">
      OBD-II CAN Bus GPS Development Kit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1030001/" title="Serial CAN Bus Module" class="md-nav__link">
      Serial CAN Bus Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1030011/" title="Serial CAN Lite" class="md-nav__link">
      Serial CAN Lite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1030002/" title="OBD-II CAN-BUS Development Kit" class="md-nav__link">
      OBD-II CAN-BUS Development Kit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1030008/" title="CANBed - Arduino CAN Bus Development Kit" class="md-nav__link">
      CANBed - Arduino CAN Bus Development Kit
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-on" class="md-nav__link">
    What's on
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#buses" class="md-nav__link">
    Buses
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use" class="md-nav__link">
    How to Use
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#displaying-sensor-data" class="md-nav__link">
    Displaying Sensor Data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    Resources
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Sensor Display Board</h1>
                
                <h2 id="introduction"><strong><em>Introduction</em></strong><a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/sensor-board-front.png" /></p>
<p>The Sensor Display board allows you to connect Longan cards with Carduino for read sensor data, and display them with the OLED card. If you need more edge connector slots to connect more Longan card, plug an Extension board into one of the available slots.</p>
<blockquote>
<p><strong><em>NOTE:</em></strong>  Jue (vessel) A jue is a shape of Chinese ritual bronze, a tripod vessel or goblet used to serve warm wine. It was used for ceremonial purposes by the Chinese of the Xia, Shang, and Zhou dynasties. - <strong><em>Wikipedia</em></strong> </p>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/jue.png" /></p>
</blockquote>
<h2 id="whats-on"><strong><em>What's on</em></strong><a class="headerlink" href="#whats-on" title="Permanent link">&para;</a></h2>
<p>There are 4 edge connector slots can be found on the front side of the Extension board: (three vertical slots and one horizontal slot). </p>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/sensro-board-front.png" /></p>
<p>On the back side of the Sensor Display board, you can see following things.</p>
<ul>
<li>USB Type-C connector – connects with your computer through a Type-C USB cable.</li>
<li>LED – Emits blue light to indicate power.</li>
<li>Two programmable buttons – can be labelled an left button and right button.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/sensor-board-back.png" /></p>
<h2 id="buses"><strong><em>Buses</em></strong><a class="headerlink" href="#buses" title="Permanent link">&para;</a></h2>
<p>Sensor display board shares following buses with all the edge connector slots.</p>
<ul>
<li>I2C bus</li>
<li>Power bus</li>
</ul>
<h2 id="how-to-use"><strong><em>How to Use</em></strong><a class="headerlink" href="#how-to-use" title="Permanent link">&para;</a></h2>
<p>First, plug a Longan card into one of the vertical edge connector slot of the sensor display board.</p>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/sensor-board-use-1.png" /></p>
<p>When you plug, the white arrow head printed on the card near the gold fingers (edge connector) should be pointing toward the white arrow head printed near the edge connector slot of the board.</p>
<p>Next, plug the Carduino into another horizontal edge connector slot.</p>
<p>Then plud the OLED display card into the horizontal edge connector slot of the Sensor display board.</p>
<h3 id="displaying-sensor-data"><strong><em>Displaying Sensor Data</em></strong><a class="headerlink" href="#displaying-sensor-data" title="Permanent link">&para;</a></h3>
<p>The sample code can be loaded to your Arduino IDE by clicking on File &gt; Examples &gt; LonganCards &gt; SensorBoard.</p>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/arduno-ide-setup-1.png" /></p>
<p>If you have trouble loading the ReadSensor sketch from the examples, you can copy and paste the code below into the Arduino editor.</p>
<div class="codehilite"><pre><span></span><code>// get data from card sensor

#include &lt;Wire.h&gt;
#include &lt;SPI.h&gt;
#include &lt;Adafruit_GFX.h&gt;
#include &lt;Adafruit_SSD1306.h&gt;

#include &quot;LonganCards.h&quot;
#include &quot;CardsDfs.h&quot;
#include &quot;cardBasic.h&quot;
#include &quot;watchdog.h&quot;

CARD_INFO card;

const int pinBtnL   = A0;
const int pinBtnR   = A1;

// Carduino 32U4
#define OLED_DC     4          // INT
#define OLED_CS     12          // OK
#define OLED_RESET  6           // FAIL

Adafruit_SSD1306 display(OLED_DC, OLED_RESET, OLED_CS);

unsigned char sensorVal[10][6];
unsigned char addr_buf = 0;

unsigned char cntDisp = 0;

// MODE
// 0 - all in one page
// 1 - roll
// 2 - right button to switch
unsigned char dispMode  = 1;
unsigned char switchCnt = 0;

void oledInit()
{
    display.begin(SSD1306_SWITCHCAPVCC);
    display.display();
    delay(2000);
}

void getSensor()
{
    card.addr = getAddr();

    if(card.addr == 0)
    {
        Serial.println(&quot;NO DEVICE&quot;);
        waitForDevice();
        return;
    }

    unsigned char dta[10];
    unsigned char dtaLen = 0;

    for(int i=0; i&lt;card.senCnt; i++)
    {
        Wire.beginTransmission(card.addr); // transmit to device #8
        Wire.write(0x30+i);  
        Wire.endTransmission();    // stop transmitting
        delay(10);
        WDR();
        Wire.requestFrom(card.addr, 6);    // request 6 bytes from slave device #8
        delay(10);
        WDR();
        while (Wire.available())
        { // slave may send less than requested
            dta[dtaLen++] = Wire.read();
        }

        if(dtaLen)
        {
            for(int j=0; j&lt;dtaLen; j++)
            {
                sensorVal[i][j] = dta[j];
            }
            memset(dta, 0, 10);
            dtaLen = 0;
        }
        delay(10);
    }
}

void modeSwitchBtn()
{
    if(!digitalRead(pinBtnL))
    {
        delay(10);
        if(!digitalRead(pinBtnL))
        {
            cntDisp = 0;
            dispMode = (dispMode == 2) ? 0 : (1-dispMode);
            while(!digitalRead(pinBtnL));

            Serial.print(&quot;MODE = &quot;);
            Serial.println(dispMode);
        }
    }

    if(!digitalRead(pinBtnR))
    {
        delay(10);
        if(!digitalRead(pinBtnR))
        {
            if(dispMode == 2)
            {
                switchCnt++;
                if(switchCnt&gt;=card.senCnt)
                {
                    switchCnt = 0;
                }
            }
            else
            {
                dispMode = 2;
                switchCnt = 0;
            }

            while(!digitalRead(pinBtnR));
            Serial.print(&quot;SWITCH = &quot;);
            Serial.println(switchCnt);
        }
    }
}



void dispModeAll()
{

    display.clearDisplay();
    display.setTextColor(WHITE);
    display.setTextSize(1);

    for(int i=0; i&lt;card.senCnt; i++)
    {
        display.setCursor(0, 10*i);

        switch(sensorVal[i][5])
        {
            case UNIT_TEMPERATURE:
            dispSensorSmall(str2float(&amp;sensorVal[i][1]), UNIT_TEMPERATURE, 1, &quot;Temperature&quot;);
            break;

            case UNIT_HUMIDITY:
            dispSensorSmall(str2float(&amp;sensorVal[i][1]), UNIT_HUMIDITY, 0, &quot;Humidity&quot;);
            break;

            case UNIT_METER:
            dispSensorSmall(str2float(&amp;sensorVal[i][1]), UNIT_METER, 1, &quot;Meter&quot;);
            break;

            case UNIT_MILLIMETER:
            dispSensorSmall(str2float(&amp;sensorVal[i][1]), UNIT_MILLIMETER, 0, &quot;Millimeter&quot;);
            break;

            case UNIT_PRESS:
            dispSensorSmall(str2float(&amp;sensorVal[i][1]), UNIT_PRESS, 3, &quot;Press&quot;);
            break;

            case UNIT_ANALOG:
            dispSensorSmall(str2float(&amp;sensorVal[i][1]), UNIT_ANALOG, 0, &quot;Value&quot;);
            break;

            //case UNIT_ALTITUDE:
            //dispSensorSmall(str2float(&amp;sensorVal[i][1]), UNIT_ALTITUDE, 1, &quot;Altitude&quot;);
            //break;

            default:;
        }
    }

    display.display();

    display.display();
}

void dispModeRoll()
{
    if(card.addr == 0)return;
    static unsigned long timer_s = millis();

    if(millis()-timer_s &gt; 3000)
    {
        cntDisp++;
        cntDisp = (cntDisp &gt;= card.senCnt) ? 0 : cntDisp;
        timer_s = millis();
    }

    switch(sensorVal[cntDisp][5])
    {
        case UNIT_TEMPERATURE:
        dispSensor(str2float(&amp;sensorVal[cntDisp][1]), UNIT_TEMPERATURE, 1, &quot;Temperature&quot;);
        break;

        case UNIT_HUMIDITY:
        dispSensor(str2float(&amp;sensorVal[cntDisp][1]), UNIT_HUMIDITY, 0, &quot;Humidity&quot;);
        break;

        case UNIT_METER:
        dispSensor(str2float(&amp;sensorVal[cntDisp][1]), UNIT_METER, 1, &quot;Meter&quot;);
        break;

        case UNIT_MILLIMETER:
        dispSensor(str2float(&amp;sensorVal[cntDisp][1]), UNIT_MILLIMETER, 0, &quot;Millimeter&quot;);
        break;

        case UNIT_PRESS:
        dispSensor(str2float(&amp;sensorVal[cntDisp][1]), UNIT_PRESS, 3, &quot;Press&quot;);
        break;

        case UNIT_ANALOG:
        dispSensor(str2float(&amp;sensorVal[cntDisp][1]), UNIT_ANALOG, 0, &quot;Value&quot;);
        break;

        //case UNIT_ALTITUDE:
        //dispSensor(str2float(&amp;sensorVal[cntDisp][1]), UNIT_ALTITUDE, 1, &quot;Altitude&quot;);
        //break;

        default:;
    }
}

void dispModeSwitch()
{
    if(card.addr == 0)return;

    switch(sensorVal[switchCnt][5])
    {
        case UNIT_TEMPERATURE:
        dispSensor(str2float(&amp;sensorVal[switchCnt][1]), UNIT_TEMPERATURE, 1, &quot;Temperature&quot;);
        break;

        case UNIT_HUMIDITY:
        dispSensor(str2float(&amp;sensorVal[switchCnt][1]), UNIT_HUMIDITY, 0, &quot;Humidity&quot;);
        break;

        case UNIT_METER:
        dispSensor(str2float(&amp;sensorVal[switchCnt][1]), UNIT_METER, 1, &quot;Meter&quot;);
        break;

        case UNIT_MILLIMETER:
        dispSensor(str2float(&amp;sensorVal[switchCnt][1]), UNIT_MILLIMETER, 0, &quot;Millimeter&quot;);
        break;

        case UNIT_PRESS:
        dispSensor(str2float(&amp;sensorVal[switchCnt][1]), UNIT_PRESS, 3, &quot;Press&quot;);
        break;

        case UNIT_ANALOG:
        dispSensor(str2float(&amp;sensorVal[switchCnt][1]), UNIT_ANALOG, 0, &quot;&quot;);
        break;

        //case UNIT_ALTITUDE:
        //dispSensor(str2float(&amp;sensorVal[switchCnt][1]), UNIT_ALTITUDE, 1, &quot;Altitude&quot;);
        //break;

        default:;
    }
}

void displaySensor()
{

    switch (dispMode)
    {
        case 0:         // all in one page

        dispModeAll();
        break;
        case 1:         // rool
        dispModeRoll();
        break;
        case 2:         // switch to change
        dispModeSwitch();       

        break;

        default:;

    }


}

unsigned char getAddr()
{
    static long timer_s = -10001;
    if(millis()-timer_s &lt; 1000)return card.addr;
    timer_s = millis();

    for(int i = 1; i &lt; 127; i++ )
    {
        Wire.beginTransmission(i);
        unsigned char error = Wire.endTransmission();

        if (error == 0)
        {
            return i;
        }  
    }

    return 0;    
}

void waitForDevice()
{
    while(1)
    {
        Serial.println(&quot;GET ADDR FROM THE CARD&quot;);
        card.addr = getAddr();
        Serial.print(&quot;CARD ADDR = 0X&quot;);
        Serial.println(card.addr, HEX);

        if(card.addr == 0)
        {
            Serial.println(&quot;NO DEVICE!&quot;);

            display.clearDisplay();
            display.setCursor(0, 0);
            display.setTextSize(1);
            display.setTextColor(WHITE);
            display.println(&quot;NO DEVICE&quot;);
            display.display();

            delay(500);
            WDR();
        }
        else
        {
            if(card.addr != addr_buf)
            {
                addr_buf = card.addr;
                card.getInfo();
                card.disp();
            }
            break;
        }

        blinkblink();
    }
}

void setup() {

    Wire.begin();        // join i2c bus (address optional for master)
    Serial.begin(115200);  // start serial for output

   // while(!Serial.available());

    Serial.println(&quot;start&quot;);

    pinMode(pinBtnL, INPUT_PULLUP);
    pinMode(pinBtnR, INPUT_PULLUP);
    pinMode(13, OUTPUT);

    //card.addr = getAddr();
    oledInit();

    Serial.println(&quot;OLED INIT OK&quot;);

    waitForDevice();

    WD_SET(WD_RST, WDTO_1S);

    Serial.println(&quot;init done&quot;);

}

void loop() {

    blinkblink();
    WDR();
    modeSwitchBtn();
    WDR();
    getSensor();
    WDR();
    displaySensor();
    WDR();
    delay(50);
    //Serial.println(&quot;#&quot;);
    WDR();
}

void printTstr(int x, int y, int size, char *str)
{
    display.setTextSize(size);
    display.setCursor(x,y);
    display.println(str);
}

void printTnum(float num, int d)
{
    int tmp = num;

    int a = 0;


    do
    {
        tmp /= 10;
        a++;
    }while(tmp);

    a += (d&gt;0) ? (d+1) : 0;

    int x = (128-a*18.2)/2;
    int y = 20;

    display.setTextSize(3);
    display.setCursor(x, y);
    display.println(num, d);
}


void printUnit(int unit)
{
    switch (unit)
    {
        case UNIT_TEMPERATURE:

        printTstr(80, 48, 1, &quot;o&quot;);
        printTstr(88, 50, 2, &quot;C&quot;);
        break;

        case UNIT_HUMIDITY:

        printTstr(88, 50, 2, &quot;%&quot;);
        break;

        case UNIT_METER:
        //case UNIT_ALTITUDE:

        printTstr(88, 50, 2, &quot;m&quot;);
        break;

        case UNIT_MILLIMETER:

        printTstr(88, 50, 2, &quot;mm&quot;);
        break;

        case UNIT_PRESS:

        printTstr(88, 50, 2, &quot;kPa&quot;);
        break;


        default:;
    }
}

void printUnitSmall(int unit)
{
    switch (unit)
    {
        case UNIT_TEMPERATURE:

        display.print(&quot;C&quot;);
        break;

        case UNIT_HUMIDITY:

        display.print(&quot;%&quot;);
        break;

        case UNIT_METER:
        //case UNIT_ALTITUDE:

        display.print(&quot;m&quot;);
        break;

        case UNIT_MILLIMETER:

        display.print(&quot;mm&quot;);
        break;

        case UNIT_PRESS:

        display.print(&quot;kPa&quot;);
        break;


        default:;
    }
}


void dispSensor(float num, unsigned char unit, unsigned char d, char *str)
{
    display.clearDisplay();
    display.setTextColor(WHITE);


    printTstr(0, 0, 1, str);
    printTnum(num, d);
    printUnit(unit);
    display.display();
}


void dispSensorSmall(float num, unsigned char unit, unsigned char d, char *str)
{
    //display.setCursor(0, 0);
    display.print(str);
    display.print(&quot; = &quot;);
    display.print(num, d);
    display.print(&quot; &quot;);
    printUnitSmall(unit);
    display.println();
}

void blinkblink()
{
    static unsigned long timer_s = millis();

    if(millis()-timer_s &lt; 100)return;
    timer_s = millis();

    digitalWrite(13, 1-digitalRead(13));

}
// END FILE
</code></pre></div>

<p>Connect the Type-C USB cable to the USB connector of the Carduino and connect the other end to your computer.</p>
<p>Next, tell the Arduino IDE to use the Carduino. To do this, click Tools &gt; Board &gt; Carduino 32U4 under Longen AVR Boards.</p>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/arduno-ide-setup-2.png" /></p>
<p>Then select the proper port in Tools &gt; Port &gt; (the Serial/COM port of your Carduino).</p>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/arduno-ide-setup-3.png" /></p>
<p>Next, upload the program by clicking Sketch &gt; Upload.</p>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/arduno-ide-setup-4.png" /></p>
<p>It will take some time to compile and upload the sketch into the Carduino.</p>
<p>Once uploaded, the OLED card will display the sensor value. You can press the left push button of the Sensor display card to toggle the display view of the OLED.</p>
<p><img alt="" src="https://raw.githubusercontent.com/Longan-Labs/docs_mkdocs/master/docs/images/1017007/diplay-1.png" /></p>
<p>Later, you can remove the USB plug from the Carduino and connect it with the USB slot of the Sensor display card or you can plug a battery card into the Sensor display board to make the unit protable.</p>
<h2 id="resources"><strong><em>Resources</em></strong><a class="headerlink" href="#resources" title="Permanent link">&para;</a></h2>
<ul>
<li>Eagle Files: <a href="https://github.com/Longan-Labs/EagleFile_Cards/tree/master/1016007_Sensor_Display_Board">https://github.com/Longan-Labs/EagleFile_Cards/tree/master/1016007_Sensor_Display_Board</a></li>
</ul>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../1017002/" title="Extension Board" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Extension Board
              </span>
            </div>
          </a>
        
        
          <a href="../1011008/" title="BME280 Card" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                BME280 Card
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 Longan Labs
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
        <script src="../javascripts/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>